<H1>계층형 질의와 셀프 조인</H1>

<h2>계층형 질의</h2>

<img src=".\test.PNG" width="50%" height="50%">

<BR>
'A' 사원은 관리자가 없습니다. 'B'와'C'사원의 관리는 'A'사원입니다.  또한 'D'와 'E' 사원의 관리자는 'C' 사원입니다. <BR>
그림에서 보듯이 위에서 아래로 내려가는 하향식 방식을 기준으로 맨 상위에 있는 'A' 사원을 루트 데이터, 맨 아래에 있는 'D','E' 사원을 리프 데이터라고 합니다. <BR>
이러한 식으로 테이블에 계층형 데이터를 입력할 수 있으며, 이러한 계층형 구조의 데이터를 SQL문으로 표현하는 것을  <U>계층형 질의 혹은 계층형 SQL</U> 이라고 합니다.<BR>
또한 동일한 테이블끼리 조인 연산을 수행하는 조인 방식인 셀프 조인으로도 계층형 구조로 이루어진 데이터를 조회할 수 있습니다

>계층형 질의
>> * 테이블 내에 계층형 데이터가 존재하는 경우 데이터를 조회하기 위해서 계층형 질의를 사용한다.
>> 계층형 데이터란 동일 테이블에 계층적으로 상위와 하위 데이터가 포함된 데이터를 말한다. <BR>
EX) 회사의 조직도, 국가의 행정구역, 대학교의 대학/학부/학과 등이 계층형 구조이다.

<H2>오라클 계층형 SQL</H2>
오라클 DBMS는 계층형 데이터 구조를 SQL문으로 쉽게 작성할 수 있도록 계층형SQL문 기능을 제공합니다.<BR>
기존의 SELECT문에 START WITH, CONNECT BY, ORDER SIBLINGS BY문을 결합한 구조입니다.

>오라클 계층형 SQL문
>>|구분|설명|
>>|----|---|
>>|SELECT 칼럼| <UL>조회하고자 하는 칼럼을 지정한다.</UL>|
>>|FROM 테이블| <UL>대상 테이블을 지정한다.</UL>|
>>|WHERE조건|<UL>모든 전개를 수행한 후에 지정된 조건을 만족하는 데이터만 추출한다.</UL><UL>계층 전개 후 출력되는 집합에 대한 필터 처리를 하는 것이다.</UL>|
>>|START WITH조건|<UL>계층 구조 전개의 시작 위치를 지정하는 구문이다. 즉, 루트 데이터를 지정한다.(부모 데이터)</UL>|
>>|CONNECT BY[NOCYCLE][PRIOR] A AND B| <UL>CONNECT BY절은 다음에 전개될 자식 데이터를 지정하는 구문이다.</UL><UL>PRIOR PK(자식) =FK(부모) 형태를 사용하면 계층 구조에서 부모 데이터에서 자식 데이터(부모 -> 자식) 방향으로 전개하는 순방향 전개를 한다.</UL><UL>PRIOR FK(부모) = PK(자식) 형태를 사용하면 반대로 자식 데이터에서 부모 데이터(자식 -> 부모) 벙형으로 전개하는 역방향 전개를 한다.</UL><UL>NOCYCLE을 추가하면 사이클이 발생한 이후의 데이터는 전개하지 않는다.</UL>|
>>|ORDER SIBLINGS BY 칼럼|<UL>형제 노트(동일 LEVEL) 사이에서 정렬을 수행한다.</UL>|

<br>

계층형 SQL문은 위 표에 나와있는 것처럼 6가지가 결합된 형태로 이루어져 있습니다.
또한 **계층형SQL문에서는 오라클 내부에서 제공하는 Pseudo 칼럼(가상 칼럼)이 있습니다.**

>계층형 SQL에서 제공하는 가상 칼럼
>>|구분|설명|
>>|---|----|
>>|LEVEL| <UL>루트 데이터면 1이다, 1부터 시작한다.</UL><UL>그 하위 데이터면 2이다.</UL><UL>하위 데이터가 있을 때마다 1씩 증가한다.</UL>|
>>|CONNECT_BY_ISLEAF|<UL>전개과정에서 해당 데이터가 리프 데이터면 1이고 그렇지 않으면 0이다.</UL>|
>>|CONNECT_BY_ISCYCLE|<UL>전개과정에서 자식을 갖는데, 해당 데이터가 조사응로서 존재하면 1이고 그렇지 않으면 0이다.</UL>|

<H2>계층형 SQL문 기본</H2>

<img src=".\계층형모델.PNG" width="50%" height="50%">
<BR>

> 계층형모델

<BR>

하나의 업종분류구분(TB_INDUTY_CL_SE)은 여러 개의 업종분류(TB_INDUTY_CL)를 가질수 있다. <BR>

업종분류 테이블에는 업종분류코드칼럼이 있으며 이 



